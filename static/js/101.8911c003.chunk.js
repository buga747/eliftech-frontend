"use strict";(self.webpackChunkelifschool_test_frontend=self.webpackChunkelifschool_test_frontend||[]).push([[101],{101:function(e,n,t){t.r(n);var r,i,a,s,u,c,o=t(861),l=t(942),d=t(413),h=t(439),p=t(168),f=t(757),m=t.n(f),x=t(791),v=t(174),j=t(15),y=t(444),Z=t(126),b=t(184),g=y.ZP.div(r||(r=(0,p.Z)(["\n  display: flex;\n  justify-content: space-between;\n"]))),w=y.ZP.div(i||(i=(0,p.Z)(["\n  width: 50%;\n"]))),P=y.ZP.div(a||(a=(0,p.Z)(["\n  width: 50%;\n"]))),k=y.ZP.form(s||(s=(0,p.Z)(["\n  display: flex;\n  flex-direction: column;\n"]))),q=y.ZP.div(u||(u=(0,p.Z)(["\n  margin-bottom: 1rem;\n"]))),S=y.ZP.div(c||(c=(0,p.Z)(["\n  margin-top: 1rem;\n"])));n.default=function(e){var n=e.items,t=(0,x.useState)({name:"",email:"",phone:"",address:""}),r=(0,h.Z)(t,2),i=r[0],a=r[1],s=(0,x.useState)(""),u=(0,h.Z)(s,2),c=u[0],p=u[1];(0,x.useEffect)((function(){n.length>0&&p(n[0].shopId)}),[n]);var f=(0,x.useState)(n),y=(0,h.Z)(f,2),_=y[0],C=y[1],I=(0,x.useState)(0),E=(0,h.Z)(I,2),A=E[0],T=E[1];(0,x.useEffect)((function(){var e=0;_.forEach((function(n){e+=n.price*n.quantity})),T(e)}),[_]);var U=function(e){var n=e.target,t=n.name,r=n.value;a((function(e){return(0,d.Z)((0,d.Z)({},e),{},(0,l.Z)({},t,r))}))},$=function(){var e=(0,o.Z)(m().mark((function e(n){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t={user:{name:i.name,email:i.email,phone:i.phone,address:i.address},shopId:c,items:_.map((function(e){return{name:e.title,quantity:e.quantity,price:e.price}})),totalPrice:A,date:(new Date).toISOString()},e.prev=2,e.next=5,(0,j.f)(t);case 5:e.sent&&v.Am.success("Thank you for your order. Wait for the delivery"),a({name:"",email:"",phone:"",address:""}),C([]),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0.message),v.Am.error("Something wrong. Please try again later");case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n){return e.apply(this,arguments)}}();return(0,b.jsxs)(g,{children:[(0,b.jsxs)(w,{children:[(0,b.jsx)("h2",{children:"User Information"}),(0,b.jsxs)(k,{onSubmit:$,children:[(0,b.jsxs)(q,{children:[(0,b.jsx)("label",{children:"Name:"}),(0,b.jsx)("input",{type:"text",name:"name",value:i.name,onChange:U,required:!0})]}),(0,b.jsxs)(q,{children:[(0,b.jsx)("label",{children:"Email:"}),(0,b.jsx)("input",{type:"email",name:"email",value:i.email,onChange:U,required:!0})]}),(0,b.jsxs)(q,{children:[(0,b.jsx)("label",{children:"Phone:"}),(0,b.jsx)("input",{type:"tel",name:"phone",value:i.phone,onChange:U,required:!0})]}),(0,b.jsxs)(q,{children:[(0,b.jsx)("label",{children:"Address:"}),(0,b.jsx)("input",{type:"text",name:"address",value:i.address,onChange:U,required:!0})]}),(0,b.jsx)(S,{children:(0,b.jsx)("button",{type:"submit",children:"Submit"})})]})]}),(0,b.jsxs)(P,{children:[(0,b.jsx)("h2",{children:"Ordered Items"}),(0,b.jsx)("ul",{children:_.map((function(e){return(0,b.jsxs)("li",{children:[(0,b.jsx)("div",{children:(0,b.jsx)("strong",{children:e.title})}),(0,b.jsxs)("div",{children:["Quantity:",(0,b.jsx)("input",{type:"number",value:e.quantity,onChange:function(n){return function(e,n){var t=_.map((function(t){if(t._id===e){var r=t.price*n;return(0,d.Z)((0,d.Z)({},t),{},{quantity:n,total:r})}return t}));C(t)}(e._id,parseInt(n.target.value))},min:"1"})]}),(0,b.jsxs)("div",{children:["Price: $",e.price]}),(0,b.jsxs)("div",{children:["Total: $",(e.quantity*e.price).toFixed(2)]}),(0,b.jsxs)("button",{onClick:function(){return function(e){var n=_.filter((function(n){return n._id!==e}));C(n)}(e._id)},children:[" ",(0,b.jsx)(Z.yvY,{})]})]},e._id)}))}),(0,b.jsx)("div",{children:(0,b.jsxs)("strong",{children:["Total Price: $",A.toFixed(2)]})})]})]})}},15:function(e,n,t){t.d(n,{f:function(){return l},t:function(){return c}});var r=t(861),i=t(757),a=t.n(i),s=t(243),u=window.location.origin.includes("local")?"http://localhost:3030/api/shops":"https://delivery-shop-rfy2.onrender.com";function c(){return o.apply(this,arguments)}function o(){return(o=(0,r.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.get("/");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.post("/orders",n);case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.Z.defaults.baseURL=u,s.Z.defaults.baseURL=u}}]);
//# sourceMappingURL=101.8911c003.chunk.js.map